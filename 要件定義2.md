# プログラム開始
バイトコードを1つ受け取りbytecode_queueにpush
バイトコードを0以上受け取りcallee_queueにpush

bytecode_queueから一つpopし、実行開始  
途中でCREATEされたバイトコードもbytecode_queueに加えてあとで実行開始


# (シンボリック)実行
## 開始
1. バイトコードを元にexecution_environmentを作成
1. それを元にbasicblockを作成してCFGmanagerのprocessing_blockとして設定
1. VMの各種フィールドにprocessing_blockのmemory等のよく使うデータの参照をコピー(pcは参照コピーにならないが戻すことはない？)
## 実行
1. opecode\[code\[pc:pc+1]]()


# 分岐

## 分岐する場合
1. CFG_node.blocks.append(processing_block)
1. jumpdest = stack.pop()、continue_dest = pc + 2
1. jump_condition = stack.pop(), continue_condition = Not(jump_condition)
1. if jump_condition = sat and continue_condition = sat
    1. new_bn_for_jump = CFGmanager.gen_new_blocknum(), new_bn_for_continue = CFGmanager.gen_new_blocknum()
    1. CFGmanager.edges\[CFGmanager.processing_block.blocknumber\] = (new_bn_for_jump, new_bn_for_continue)
    1. processing_blockを複製してprocessing_blockに代入、VM中の各フィールドにも代入　← 関数化
    1. pre_pathcondition = path_condition, path_condition = path_condition and jump_condition ←関数化
    1. ジャンプ先pcをセットしてprocessing_blockをdfs_stackにpush
    1. processing_blockを複製してprocessing_blockに代入、VM中の各フィールドにも代入
    1. path_condition = pre_pathcondition
    1. 続行先pcをセットして実行


### ロールバック時
1. branch_block = dfs_stack.pop()
1. processing_block = branch_block
1. expand_block()
1. 実行



# createの初期化コード実行時やcallにおいて外部ジャンプする際
## 戻り先の作成
1. CFG_node.blocks.append(processing_block) 現在状態の保存
1. pc += 2
1. call_stack.append(processing_block.duplicate())　戻り先の作成

## 外部コントラクトの状態作成(create,call)
1. バイトコードを元にexecution_environmentを作成してセット
1. storage, dfs_stack(, returndata)を空にする
1. pc = 0
1. 実行

## 外部コントラクトの状態作成(delegate_call)
1. バイトコードを元にexecution_environmentを作成してセット
1. dfs_stack(, returndata)を空にする
1. pc = 0
1. 実行

## 外部から戻るとき
- create
    1. CFG_node.blocks.append(processing_block)
    1. bytecode_queue.append(code[pc+2:])
    1. return_block = call_stack.pop()
    1. return_blockに現在のstack, memory(, returndata)をセット
    1. expand_block()

- delegate_call
    1. CFG_node.blocks.append(processing_block)
    1. return_block = call_stack.pop()
    1. return_blockに現在のstorage, stack, memory(, returndata)をセット
    1. expand_block()
    1. 実行

- call
    1. CFG_node.blocks.append(processing_block)
    1. return_block = call_stack.pop()
    1. return_blockに現在のstorage, stack, memory(, returndata)をセット
    1. expand_block()
    1. 実行

# 終端到達時(return以外)
1. CFG_node.blocks.append(processing_block)
1. dfs用スタックが空でなければロールバック

